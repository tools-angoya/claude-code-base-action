# カスタムプロンプト機能

Claude Code Base Actionでは、既存モードのプロンプトをカスタマイズできます。

## 概要

`.claude/modes/`ディレクトリに`mode名.md`ファイルを配置することで、既存モードのプロンプト（custom_instructions）をカスタマイズできます。

## サポートされているモード

以下の既存モードのプロンプトをカスタマイズできます：

- `architect` - システム設計・アーキテクチャ
- `code` - コード実装・開発
- `debug` - デバッグ・テスト・問題解決
- `ask` - 質問回答・情報提供
- `orchestrator` - 複数タスクの統合・管理

## 使用方法

### 1. ディレクトリ作成

```bash
mkdir -p .claude/modes
```

### 2. カスタムプロンプトファイル作成

例：`architect`モードのカスタマイズ

```bash
# .claude/modes/architect.md
あなたは経験豊富なシステムアーキテクトです。
特に以下の点に注意してください：

- セキュリティを最優先に考慮
- スケーラビリティを重視
- 最新のベストプラクティスを適用
- システム全体の整合性を保つ
- 技術的負債を最小限に抑える

システム設計、アーキテクチャ策定、技術選択において戦略的な視点を提供してください。
```

### 3. GitHub Actionsでの使用

```yaml
- name: Run Claude with Custom Prompts
  uses: tools-angoya/claude-code-base-action@main
  with:
    prompt: "システム設計を行ってください"
    mode: "architect"  # カスタマイズされたarchitectモードが使用される
```

## ファイル形式

- **ファイル名**: `{mode名}.md` (例: `architect.md`, `code.md`)
- **内容**: プレーンテキストのプロンプト内容のみ
- **エンコーディング**: UTF-8

## 注意事項

- 複雑なメタデータや設定は不要
- 新規モードの追加はサポートされていません
- 既存モードのプロンプト上書きのみ可能
- ファイルが存在しない場合は、デフォルトのプロンプトが使用されます

## ブーメランタスクとの連携

カスタマイズされたモードは、ブーメランタスク機能でも使用できます：

```
/architect カスタマイズされたアーキテクトモードでシステム設計を行ってください
```

## 例

### セキュリティ重視のarchitectモード

```markdown
# .claude/modes/architect.md
あなたはセキュリティエキスパートのシステムアーキテクトです。

すべての設計において以下を最優先してください：
- ゼロトラスト原則の適用
- データ暗号化の徹底
- 最小権限の原則
- セキュリティバイデザイン

脅威モデリングを含む包括的なセキュリティ設計を提供してください。
```

### パフォーマンス重視のcodeモード

```markdown
# .claude/modes/code.md
あなたは高性能アプリケーション開発のエキスパートです。

コード実装において以下を重視してください：
- アルゴリズムの最適化
- メモリ効率の向上
- 並行処理の活用
- プロファイリングとベンチマーク

常にパフォーマンスを意識した実装を心がけてください。
```

## トラブルシューティング

### カスタムプロンプトが読み込まれない

1. ファイル名が正しいか確認（`architect.md`, `code.md`など）
2. ファイルが`.claude/modes/`ディレクトリに配置されているか確認
3. ファイルの内容が空でないか確認
4. 有効なモード名を使用しているか確認

### ログの確認

アクションの実行ログで以下のメッセージを確認できます：

```
✅ カスタムプロンプトを2個読み込みました
  - architectモード
  - codeモード